{% extends 'base.html' %}

{% block page-title %}{{ page_title }}{% endblock %}

{% block main-content %}
<div id='appTitle' class="row page-header">
    <div class='page-title col-sm-12'>
        <h1>{{ page_title }}</h1>
    </div>
</div>
<div id='appWindow' class='container listing'>
    <nav aria-label="Page Numbers">
        <ul class="pagination justify-content-center">
            <li class="page-item<% if (current_page == 1) { %> disabled<% } %>"><a class="page-link" href="/#<%= url_suffix %><%= prev_page %>"
                    tabindex="-1">Prev</a></li>
            <% for (let i = 1; i < number_of_pages + 1; i++) { %>
            <li class="d-none d-sm-block page-item<% if (i == current_page ) { %> active<% } %>"><a class="page-link"
                    href="/#<%= url_suffix %><%= i %>">
                    <%= i %></a></li>
            <% } %>
            <li class="page-item<% if (current_page >= number_of_pages) { %> disabled<% } %>"><a class="page-link" href="/#<%= url_suffix %><%= next_page %>">Next</a></li>
        </ul>
    </nav>

    {% if dosgames_list %}
        <div class="row games-list-row">
            {% for dosgame in dosgames_list %}
                {% comment %} Game Card {% endcomment %}
                <div class="col-sm-4">
                    <div class="game-listview card">
                        <div class='listView-img-placeholder'>
                            <a href='#'><img class="card-img-top rounded listView-screenshot" src="{{ MEDIA_URL }}{{ dosgame.thumbnail_src }}"
                                    alt="{{ dosgame.title }} Screenshot"></a>
                        </div>
                        <div class="card-body">
                            <h4 class="card-title"><a href='#'>{{ dosgame.title }}</a></h4>
                            <p class='card-genre'><a href='#'>{{ dosgame.genre }}</a></p>
                            <p class="card-text">
                                {% autoescape off %}
                                    {{ dosgame.short_description }}
                                {% endautoescape %}
                            </p>
                            <p class="card-publisher-and-date font-weight-light"></p>
                                <a href='#'>{{ dosgame.publisher }}</a>
                            {{ dosgame.year_released }}
                            </p>
                            <!-- p class="card-user-rating">5</p -->
                        </div>
                    </div>
                </div>

                {% comment %} Every 3 columns, put end the row and start a new row {% endcomment %}
                {% if forloop.counter|divisibleby:"3" %}
                    </div><div class="row games-list-row">                        
                {% endif %}

                {% comment %} Every 2 rows, serve the ad {% endcomment %}
                {% if forloop.counter|divisibleby:"6" %}
                    </div><div class="row text-center ad-break">
                        <div class="col-sm-12">   
                            <img src="https://via.placeholder.com/728x90"> 
                        </div>
                    </div><div class="row games-list-row">                        
                {% endif %}
                
            {% endfor %}
    {% endif %}        



    <nav aria-label="Page Numbers">
        <ul class="pagination justify-content-center">
            <li class="page-item<% if (current_page == 1) { %> disabled<% } %>"><a class="page-link" href="/#<%= url_suffix %><%= prev_page %>"
                    tabindex="-1">Prev</a></li>
            <% for (let i = 1; i < number_of_pages + 1; i++) { %>
            <li class="d-none d-sm-block page-item<% if (i == current_page ) { %> active<% } %>"><a class="page-link"
                    href="/#<%= url_suffix %><%= i %>">
                    <%= i %></a></li>
            <% } %>
            <li class="page-item<% if (current_page >= number_of_pages) { %> disabled<% } %>"><a class="page-link" href="/#<%= url_suffix %><%= next_page %>">Next</a></li>
        </ul>
    </nav>
</div>

{% endblock %}